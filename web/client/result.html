<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Travel Result - GreenPulse</title>
    <link rel="stylesheet" type="text/css" href="./css/style.css">
    <style>
      .page {
        width: 100%;
        background-color: rgba(255, 255, 255, 1);
        position: relative;
        min-height: 1300px;
        overflow: hidden;
      }

      .group_1 {
        width: 1440px;
        height: 115px;
      }

      .group_2 {
        width: 1112px;
        height: 103px;
        margin: 17px 0 0 38px;
      }

      .image_1 {
        width: 82px;
        height: 72px;
      }

      .text_1 {
        width: 359px;
        height: 94px;
        overflow-wrap: break-word;
        color: rgba(61, 124, 74, 1);
        font-size: 50px;
        font-family: Poppins-ExtraBold;
        font-weight: normal;
        text-align: left;
        white-space: nowrap;
        line-height: 50px;
        margin: 9px 0 0 23px;
      }

      .text_2 {
        width: 72px;
        height: 36px;
        overflow-wrap: break-word;
        color: rgba(0, 0, 0, 1);
        font-size: 24px;
        font-family: Poppins-Regular;
        font-weight: normal;
        text-align: left;
        white-space: nowrap;
        line-height: 24px;
        margin: 36px 0 0 82px;
      }

      .text_3 {
        width: 67px;
        height: 36px;
        overflow-wrap: break-word;
        color: rgba(61, 124, 74, 1);
        font-size: 24px;
        font-family: Poppins-ExtraBold;
        font-weight: normal;
        text-align: left;
        white-space: nowrap;
        line-height: 24px;
        margin: 36px 0 0 150px;
      }

      .text_4 {
        width: 133px;
        height: 36px;
        overflow-wrap: break-word;
        color: rgba(0, 0, 0, 1);
        font-size: 24px;
        font-family: Poppins-Regular;
        font-weight: normal;
        text-align: left;
        white-space: nowrap;
        line-height: 24px;
        margin: 38px 0 0 144px;
      }

      .group_3 {
        background-color: rgba(51, 74, 51, 1);
        width: 1440px;
        height: 403px;
        margin-top: 782px;
      }

      .text_5 {
        width: 103px;
        height: 20px;
        overflow-wrap: break-word;
        color: rgba(255, 255, 255, 1);
        font-size: 13px;
        font-family: Poppins-Thin;
        font-weight: 100;
        text-align: left;
        white-space: nowrap;
        line-height: 13px;
        margin: 16px 0 0 17px;
      }

      .paragraph_1 {
        width: 1400px;
        height: 153px;
        overflow-wrap: break-word;
        color: rgba(255, 255, 255, 1);
        font-size: 11px;
        font-family: Poppins-ExtraLight;
        font-weight: 250;
        text-align: left;
        margin: -12px 0 0 17px;
      }

      .text-wrapper_1 {
        width: 607px;
        height: 36px;
        margin: 25px 0 0 37px;
      }

      .text_6 {
        width: 228px;
        height: 36px;
        overflow-wrap: break-word;
        color: rgba(229, 171, 109, 1);
        font-size: 24px;
        font-family: Poppins-ExtraBold;
        font-weight: normal;
        text-align: left;
        white-space: nowrap;
        line-height: 24px;
      }

      .text_7 {
        width: 129px;
        height: 36px;
        overflow-wrap: break-word;
        color: rgba(229, 171, 109, 1);
        font-size: 24px;
        font-family: Poppins-ExtraBold;
        font-weight: normal;
        text-align: left;
        white-space: nowrap;
        line-height: 24px;
      }

      .group_4 {
        width: 619px;
        height: 63px;
        margin: 15px 0 87px 37px;
      }

      .text_8 {
        width: 341px;
        height: 48px;
        overflow-wrap: break-word;
        color: rgba(255, 255, 255, 1);
        font-size: 20px;
        font-family: Poly-Regular;
        font-weight: normal;
        text-align: left;
      }

      .text-wrapper_2 {
        width: 141px;
        height: 63px;
      }

      .text_9 {
        width: 141px;
        height: 24px;
        overflow-wrap: break-word;
        color: rgba(255, 255, 255, 1);
        font-size: 20px;
        font-family: Poly-Regular;
        font-weight: normal;
        text-align: left;
        white-space: nowrap;
        line-height: 20px;
      }

      .text_10 {
        width: 40px;
        height: 24px;
        overflow-wrap: break-word;
        color: rgba(255, 255, 255, 1);
        font-size: 20px;
        font-family: Poly-Regular;
        font-weight: normal;
        text-align: left;
        white-space: nowrap;
        line-height: 20px;
        margin-top: 15px;
      }

      .group_5 {
        box-shadow: 0px 4px 4px 0px rgba(0, 0, 0, 0.25);
        background-color: rgba(249, 250, 236, 1);
        height: 783px;
        width: 100%;
        min-width: 1440px;
        position: absolute;
        left: 0;
        top: 114px;
      }

      .box_1 {
        width: 1109px;
        height: 70px;
        margin: 54px 0 0 160px;
      }

      .group_6 {
        box-shadow: 0px 4px 4px 0px rgba(0, 0, 0, 0.25);
        height: 70px;
        width: 169px;
      }

      .block_1 {
        height: 70px;
        background: url(https://lanhu-oss-2537-2.lanhuapp.com/FigmaDDSSlicePNGd0f56da870bd0468226d45d82628a599.png)
          100% no-repeat;
        background-size: 100% 100%;
        width: 169px;
      }

      .image-wrapper_1 {
        border-radius: 50%;
        height: 24px;
        width: 118px;
        margin: 35px 0 0 26px;
      }

      .label_1 {
        width: 46px;
        height: 45px;
        margin: -24px 0 0 32px;
      }

      .group_7 {
        box-shadow: 0px 4px 4px 0px rgba(0, 0, 0, 0.25);
        height: 70px;
        margin-left: 66px;
        width: 169px;
      }

      .block_2 {
        height: 70px;
        background: url(https://lanhu-oss-2537-2.lanhuapp.com/FigmaDDSSlicePNG862d7ea8982b43f79a8399d6892c2565.png)
          100% no-repeat;
        background-size: 100% 100%;
        width: 169px;
        position: relative;
      }

      .box_2 {
        border-radius: 50%;
        width: 118px;
        height: 24px;
        margin: 35px 0 0 26px;
      }

      .image_2 {
        position: absolute;
        left: 53px;
        top: 3px;
        width: 64px;
        height: 64px;
      }

      .group_8 {
        box-shadow: 0px 4px 4px 0px rgba(0, 0, 0, 0.25);
        height: 70px;
        margin-left: 66px;
        width: 169px;
      }

      .block_3 {
        height: 70px;
        background: url(https://lanhu-oss-2537-2.lanhuapp.com/FigmaDDSSlicePNGd0f56da870bd0468226d45d82628a599.png)
          100% no-repeat;
        background-size: 100% 100%;
        width: 169px;
      }

      .image-wrapper_2 {
        border-radius: 50%;
        height: 24px;
        width: 118px;
        margin: 35px 0 0 26px;
      }

      .label_2 {
        width: 45px;
        height: 45px;
        margin: -22px 0 0 36px;
      }

      .group_9 {
        box-shadow: 0px 4px 4px 0px rgba(0, 0, 0, 0.25);
        height: 70px;
        margin-left: 66px;
        width: 169px;
      }

      .block_4 {
        height: 70px;
        background: url(https://lanhu-oss-2537-2.lanhuapp.com/FigmaDDSSlicePNGd0f56da870bd0468226d45d82628a599.png)
          100% no-repeat;
        background-size: 100% 100%;
        width: 169px;
      }

      .image-wrapper_3 {
        border-radius: 50%;
        height: 24px;
        width: 118px;
        margin: 35px 0 0 26px;
      }

      .label_3 {
        width: 45px;
        height: 45px;
        margin: -22px 0 0 36px;
      }

      .group_10 {
        box-shadow: 0px 4px 4px 0px rgba(0, 0, 0, 0.25);
        height: 70px;
        margin-left: 66px;
        width: 169px;
      }

      .box_3 {
        height: 70px;
        background: url(https://lanhu-oss-2537-2.lanhuapp.com/FigmaDDSSlicePNGd0f56da870bd0468226d45d82628a599.png)
          100% no-repeat;
        background-size: 100% 100%;
        width: 169px;
      }

      .image-wrapper_4 {
        border-radius: 50%;
        height: 24px;
        width: 118px;
        margin: 35px 0 0 26px;
      }

      .label_4 {
        width: 45px;
        height: 45px;
        margin: -22px 0 0 36px;
      }

      .text-wrapper_3 {
        width: 272px;
        height: 48px;
        margin: 45px 0 0 581px;
      }

      .text_11 {
        width: 272px;
        height: 48px;
        overflow-wrap: break-word;
        color: rgba(0, 0, 0, 1);
        font-size: 32px;
        font-family: Poppins-Black;
        font-weight: normal;
        text-align: left;
        white-space: nowrap;
        line-height: 32px;
      }

      .text-wrapper_4 {
        width: 466px;
        height: 47px;
        margin: 29px 0 0 487px;
      }

      .text_12 {
        width: 466px;
        height: 47px;
        overflow-wrap: break-word;
        color: rgba(0, 0, 0, 1);
        font-size: 24px;
        font-family: Poppins-Bold;
        font-weight: 700;
        text-align: left;
        white-space: nowrap;
        line-height: 24px;
      }

      .box_4 {
        width: 125px;
        height: 44px;
        margin: 2px 0 0 654px;
      }

      .group_11 {
        background-color: rgba(255, 255, 255, 1);
        width: 125px;
        height: 44px;
      }

      .text-wrapper_5 {
        width: 499px;
        height: 36px;
        margin: 9px 0 0 470px;
      }

      .text_13, .text_trees_needed, .text_saplings {
        width: 499px;
        height: 36px;
        overflow-wrap: break-word;
        color: rgba(0, 0, 0, 1);
        font-size: 24px;
        font-family: Poppins-Bold;
        font-weight: 700;
        text-align: left;
        white-space: nowrap;
        line-height: 24px;
        padding-top: 10px;
      }

      .box_5 {
        width: 125px;
        height: 44px;
        margin: 18px 0 0 654px;
      }

      .block_5 {
        background-color: rgba(255, 255, 255, 1);
        width: 125px;
        height: 44px;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      .image-wrapper_5 {
        display: flex;
        justify-content: center;
        align-items: center;
        margin-top: 30px;
        margin-bottom: 10px;
      }

      .image_3 {
        width: 92px;
        height: 92px;
      }

      .image_4 {
        width: 92px;
        height: 92px;
      }

      .text-wrapper_6 {
        width: 789px;
        height: 36px;
        margin: 11px 0 0 310px;
      }

      .text_14 {
        width: 789px;
        height: 36px;
        overflow-wrap: break-word;
        color: rgba(0, 0, 0, 1);
        font-size: 24px;
        font-family: Poppins-Bold;
        font-weight: 700;
        text-align: left;
        white-space: nowrap;
        line-height: 24px;
      }

      .box_6 {
        width: 169px;
        height: 70px;
        margin: 32px 0 74px 635px;
      }

      .group_12 {
        box-shadow: 0px 4px 4px 0px rgba(0, 0, 0, 0.25);
        height: 70px;
        width: 169px;
        position: relative;
      }

      .block_6 {
        background-color: rgba(211, 160, 129, 1);
        border-radius: 50%;
        width: 118px;
        height: 24px;
        margin: 35px 0 0 26px;
      }

      .block_7 {
        position: absolute;
        left: 0;
        top: 0;
        width: 169px;
        height: 70px;
        background: url(https://lanhu-oss-2537-2.lanhuapp.com/FigmaDDSSlicePNGa17af1800d57790ee851c1dc98da2d1a.png)
          100% no-repeat;
        background-size: 100% 100%;
      }

      .section_1 {
        width: 45px;
        height: 45px;
        margin: 13px 0 0 62px;
      }

      .text_15 {
        position: absolute;
        left: 37px;
        top: 18px;
        width: 96px;
        height: 36px;
        overflow-wrap: break-word;
        color: rgba(226, 129, 129, 1);
        font-size: 24px;
        font-family: Poppins-Bold;
        font-weight: 700;
        text-align: left;
        white-space: nowrap;
        line-height: 24px;
      }

      .image-wrapper_6 {
        height: 459px;
        width: 688px;
        position: absolute;
        left: -172px;
        top: 369px;
      }

      .image_5 {
        /* width: 92px;
        height: 92px;
        margin: 99px 0 0 734px; */
      }

      /* 通用样式 */
      .flex-col {
        display: flex;
        flex-direction: column;
      }

      .flex-row {
        display: flex;
        flex-direction: row;
      }

      .justify-between {
        justify-content: space-between;
      }

      /* 页面居中 */
      body {
        margin: 0;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      }

      /* 返回按钮样式 */
      .back-button {
        position: fixed;
        top: 20px;
        left: 20px;
        background: rgba(61, 124, 74, 0.9);
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 25px;
        cursor: pointer;
        font-size: 14px;
        font-family: Inter-Regular;
        transition: all 0.3s ease;
        z-index: 1000;
      }

      .back-button:hover {
        background: rgba(61, 124, 74, 1);
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(61, 124, 74, 0.3);
      }

      /* DETAILS按钮点击效果 */
      .group_12 {
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .group_12:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 16px rgba(0, 0, 0, 0.3);
      }
    </style>
  </head>
  <body>    
    <div class="page flex-col justify-between">
      <div class="group_1 flex-col">
        <div id="header"></div>
      </div>
      <div class="group_5 flex-col">
        <div id="calc_nav"></div>
        <div class="text-wrapper_3 flex-row">
          <span class="text_11">RESULT&nbsp;-&nbsp;TRAVEL</span>
        </div>
      
        <div class="text-wrapper_5 flex-row">
          <span class="text_13"></span>
        </div>
        <div class="box_5 flex-row"><div class="block_5 flex-col" id="footprint-value"></div></div>
        <div class="text-wrapper_5 flex-row">
          <span class="text_trees_needed"></span>
        </div> 
        <div class="box_5 flex-row"><div class="block_5 flex-col" id="trees-value"></div></div>      
        <div class="text-wrapper_5 flex-row">
          <span class="text_saplings">
            tree saplings for 10 years to absorb this amount of CO₂.
          </span>
        </div>        
        <div class="image-wrapper_5 flex-row">
          <img
            class="image_5"
            referrerpolicy="no-referrer"
            src="https://lanhu-oss-2537-2.lanhuapp.com/FigmaDDSSlicePNGdaf978382374dc7320e036e93b35bb9d.png"
          />
          <img
            class="image_3"
            referrerpolicy="no-referrer"
            src="https://lanhu-oss-2537-2.lanhuapp.com/FigmaDDSSlicePNGdaf978382374dc7320e036e93b35bb9d.png"
          />
          <img
            class="image_4"
            referrerpolicy="no-referrer"
            src="https://lanhu-oss-2537-2.lanhuapp.com/FigmaDDSSlicePNGdaf978382374dc7320e036e93b35bb9d.png"
          />
        </div>

        <div class="text-wrapper_6 flex-row">
          <span class="text_14"
            >Why&nbsp;can't&nbsp;I&nbsp;get&nbsp;my&nbsp;Footprint&nbsp;score&nbsp;within&nbsp;the&nbsp;means&nbsp;of&nbsp;one&nbsp;tree?</span
          >
        </div>
        <div class="box_6 flex-row">
          <div class="group_12 flex-col" onclick="goToDetails()">
            <div class="block_6 flex-col"></div>
            <div class="block_7 flex-row">
              <div class="section_1 flex-col"></div>
              <span class="text_15">Details</span>
            </div>
          </div>
        </div>
        <div class="image-wrapper_6 flex-col">
          
        </div>
      </div>
    <div id="footer"></div>
    </div>

    <script src="scripts/loadLayout.js"></script>
    <script src="scripts/calculator.js"></script>
    <script>
      function goBack() {
        window.history.back();
      }

      function goToDetails() {
        // 跳转到详情页面
        window.location.href = 'coming-soon.html';
      }
      
      // 页面加载时计算并显示结果
      document.addEventListener('DOMContentLoaded', function() {
        // 计算总碳足迹和需要的地球数量
        const result = window.calculatorUtils.calculateTotalFootprint();
        
        // 更新UI显示地球数量
        updateTreesDisplay(result.treesNeeded);
        
        // 显示详细的碳足迹组成
        displayFootprintDetails(result);
      });
      
      // 显示详细的碳足迹组成
      function displayFootprintDetails(result) {
        // 获取各类型交通工具的碳足迹值
        const carFootprint = localStorage.getItem('car_footprint') || '0';
        const motorcycleFootprint = localStorage.getItem('motorcycle_footprint') || '0';
        const publicTransportFootprint = localStorage.getItem('public_transport_footprint') || '0';
        
        // 计算总碳足迹
        const totalFootprint = parseFloat(carFootprint) + parseFloat(motorcycleFootprint) + parseFloat(publicTransportFootprint);
        
        // 计算各部分占比
        const carPercentage = totalFootprint > 0 ? (parseFloat(carFootprint) / totalFootprint * 100).toFixed(1) : 0;
        const motorcyclePercentage = totalFootprint > 0 ? (parseFloat(motorcycleFootprint) / totalFootprint * 100).toFixed(1) : 0;
        const publicTransportPercentage = totalFootprint > 0 ? (parseFloat(publicTransportFootprint) / totalFootprint * 100).toFixed(1) : 0;
        
        // 更新文本显示
        const detailsElement = document.querySelector('.text_14');
        if (detailsElement) {
          let detailsText = `Your carbon footprint breakdown: `;
          
          if (parseFloat(carFootprint) > 0) {
            detailsText += `Cars (${carPercentage}%), `;
          }
          
          if (parseFloat(motorcycleFootprint) > 0) {
            detailsText += `Motorcycles (${motorcyclePercentage}%), `;
          }
          
          if (parseFloat(publicTransportFootprint) > 0) {
            detailsText += `Public Transport (${publicTransportPercentage}%)`;
          }
          
          // 移除末尾多余的逗号和空格
          detailsText = detailsText.replace(/, $/, '');
          
          detailsElement.textContent = detailsText;
        }
      }
      
      // 更新地球图标显示
      function updateTreesDisplay(count) {
        // 获取地球图标容器
        const container = document.querySelector('.image-wrapper_5');
        if (!container) return;
        
        // 清空容器
        container.innerHTML = '';
        
        // 限制最大显示数量为5个地球
        const displayCount = Math.min(count, 5);
        
        // 添加地球图标
        for (let i = 0; i < displayCount; i++) {
          const img = document.createElement('img');
          img.className = 'image_3';
          img.setAttribute('referrerpolicy', 'no-referrer');
          img.src = 'https://lanhu-oss-2537-2.lanhuapp.com/FigmaDDSSlicePNGdaf978382374dc7320e036e93b35bb9d.png';
          container.appendChild(img);
        }
        
        // 更新文本显示
        const textElement = document.querySelector('.text_13');
        if (textElement) {
          textElement.textContent = `Your total carbon footprint for this category is`;
        }        
        const textElement1 = document.querySelector('.text_trees_needed');
        if (textElement1) {
          textElement1.textContent = `You would need to plant approximately`;
        }
        
        // 更新footprint-value显示碳足迹数值
        const footprintElement = document.getElementById('footprint-value');
        if (footprintElement) {
          // 获取总碳足迹值
          const totalFootprint = localStorage.getItem('total_footprint') || '0';
          
          // 清空之前的内容
          footprintElement.innerHTML = '';
          
          // 创建显示元素
          const valueDisplay = document.createElement('div');
          valueDisplay.style.fontSize = '24px';
          valueDisplay.style.fontWeight = 'bold';
          valueDisplay.style.color = '#3D7C4A';
          valueDisplay.style.textAlign = 'center';
          valueDisplay.style.padding = '10px';
          valueDisplay.style.fontFamily = 'Poppins-Bold';
          
          // 显示碳足迹值（四舍五入到两位小数）
          const footprintValue = parseFloat(totalFootprint).toFixed(2);
          valueDisplay.textContent = `${footprintValue}`;
          
          footprintElement.appendChild(valueDisplay);
        }        
        
        const treesElement = document.getElementById('trees-value');
        if (treesElement) {
          // 获取总碳足迹值
          const treesNeeded = localStorage.getItem('trees_needed') || '0';
          
          // 清空之前的内容
          treesElement.innerHTML = '';
          
          // 创建显示元素
          const valueDisplay = document.createElement('div');
          valueDisplay.style.fontSize = '24px';
          valueDisplay.style.fontWeight = 'bold';
          valueDisplay.style.color = '#3D7C4A';
          valueDisplay.style.textAlign = 'center';
          valueDisplay.style.padding = '10px';
          valueDisplay.style.fontFamily = 'Poppins-Bold';
          
          // 显示碳足迹值（四舍五入到两位小数）
          const treesValue = parseFloat(treesNeeded).toFixed(2);
          valueDisplay.textContent = `${treesValue}`;
          
          treesElement.appendChild(valueDisplay);
        }
      }
    </script>
  </body>
</html>
